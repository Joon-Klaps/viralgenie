report_comment: >
  This report has been generated by the <a href="https://github.com/Joon-Klaps/viralgenie" target="_blank">Joon-Klaps/viralgenie</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://github.com/Joon-Klaps/viralgenie" target="_blank">documentation</a>.
report_section_order:
  "viralgenie-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "Joon-Klaps-viralgenie-summary":
    order: -1002

export_plots: true

run_modules:
  - fastqc
  - fastp
  - trimmomatic
  - bbduk
  - umitools
  - bowtie2
  - kaiju
  - kraken
  - quast
  - samtools
  - bcftools
  - picard
  - custom_content

top_modules:
  - "fastqc":
      name: "FastQC (pre-Trimming)"
      path_filters:
        - "*_raw*fastqc.zip"
  - "fastqc":
      name: "FastQC (post-Trimming)"
      path_filters:
        - "*_trim*fastqc.zip"
  - "fastp"
  - "trimmomatic"
  - "bbduk"
  - "bowtie2":
      name: "Bowtie2 (Host-removal)"
      path_filters:
        - "*_host*"
  - "kraken":
      name: "Kraken2"
      path_filters:
        - "*kraken2*report.txt"
  - "kraken":
      name: "Bracken"
      anchor: "bracken"
      doi: "10.7717/peerj-cs.104"
      info: "Estimates species abundances in metagenomics samples by probabilistically re-distributing reads in the taxonomic tree."
      extra: "ℹ️: plot title will say Kraken2 due to the first step of bracken producing the same output format as Kraken. Abundance information is currently not supported in MultiQC."
      path_filters:
        - "*bracken*report.txt"
  - "kaiju":
      name: "Kaiju"
  - "samtools":
      name: "Samtools Stats"
  - "bcftools":
      name: "Bcftools Stats"
  - "picard":
      name: "Picard MarkDuplicates"
  - "umitools":
      name: "UMI-tools deduplication"
  - "quast":
      name: "Quast (Spades)"
      anchor: "quast"
      path_filters:
        - "*_spades.tsv"
  - "quast":
      name: "Quast (Megahit)"
      anchor: "quast"
      path_filters:
        - "*_megahit.tsv"
  - "quast":
      name: "Quast (Trinity)"
      anchor: "quast"
      path_filters:
        - "*_trinity.tsv"
  - "custom_content":
      name: "Clusters Summary"
  - "custom_content":
      name: "Joon-Klaps-viralgenie-summary"

# TODO: Include the custom assembly table to compare assemblies tools
custom_plot_config:
  general_stats_table:
    hidden: false

# Summary table names
table_columns_name:
  FastQC (pre-Trimming):
    total_sequences: "Nr. Input Reads"
    avg_sequence_length: "Length Input Reads"
    percent_gc: "% GC Input Reads"
    percent_duplicates: "% Dups Input Reads"
    percent_fails: "% Failed Input Reads"
  FastQC (post-Trimming):
    total_sequences: "Nr. Processed Reads"
    avg_sequence_length: "Length Processed Reads"
    percent_gc: "% GC Processed Reads"
    percent_duplicates: "% Dups Processed Reads"
    percent_fails: "% Failed Processed Reads"
  Samtools Stats:
    raw_total_sequences: "Nr. Reads Into Mapping"
    reads_mapped: "Nr. Mapped Reads"
    reads_mapped_percent: "% Mapped Reads"
  Quast (Spades):
    N50: "N50 (Spades)"
    L50: "L50 (Spades)"
    Largest contig: "Largest contig (Spades)"
    Total length: "Total length (Spades)"
  Quast (Megahit):
    N50: "N50 (Megahit)"
    L50: "L50 (Megahit)"
    Largest contig: "Largest contig (Megahit)"
    Total length: "Total length (Megahit)"
  Quast (Trinity):
    N50: "N50 (Trinity)"
    L50: "L50 (Trinity)"
    Largest contig: "Largest contig (Trinity)"
    Total length: "Total length (Trinity)"
  Clusters Summary:
    nr_clusters: "Nr. Clusters"
    avg_cluster_size: "Avg. Cluster Size"
    nr_singletons: "Nr. Singletons"

# Summary table visible columns
table_columns_visible:
  FastQC (pre-Trimming):
    total_sequences: True
    avg_sequence_length: True
    percent_gc: False
    percent_duplicates: False
    percent_fails: False
  FastQC (post-Trimming):
    total_sequences: True
    avg_sequence_length: True
    percent_gc: True
    percent_duplicates: True
    percent_fails: True
  # Samtools Stats:
  #   raw_total_sequences: 1
  #   reads_mapped: 2
  #   reads_mapped_percent: 3
  Quast (Spades):
    N50: True
    L50: False
    Largest contig: True
    Total length: False
  Quast (Megahit):
    N50: True
    L50: False
    Largest contig: True
    Total length: False
  Quast (Trinity):
    N50: True
    L50: False
    Largest contig: True
    Total length: False

section_comments:
  general_stats: "By default, all read count columns are displayed as millions (M) of reads."

custom_data:
  clusters_summary:
    section_name: "Clusters summary"
    description: "Summary of clusters, displaying the number of clusters, average cluster size and number of singletons (clusters with only no members, only a centroid)."
    plot_type: "table"
    headers:
      "# Clusters":
        id: "nr_clusters"
        description: "Total number of clusters based on all contigs of sample"
        format: "{:,.0f}"
      "Average cluster size":
        id: "avg_cluster_size"
        description: "Average number members (excl centroid) of the identified clusters"
        format: "{:,.0f}"
      "Number of singletons":
        id: "nr_singletons"
        description: "Total number of singleton clusters (clusters with only one member, only a centroid) based on all contigs of sample"
        format: "{:,.0f}"
    pconfig:
      id: "clusters_summary"
      table_title: "Clusters summary"
      only_defined_headers: False
      format: "{:.0f}"

sp:
  fastp:
    fn: "*.fastp.json"
  quast:
    fn: "*.tsv"
    contains: "# contigs (>= 1000 bp)"

extra_fn_clean_exts:
  - "_raw_1"
  - "_raw_2"
  - "_trim_1"
  - "_trim_2"
  - "_1"
  - "_2"
  - "_it1"
  - "_it2"
  - "_it3"
  - "_it4"
  - "_host"
  - "_spades"
  - "_megahit"
  - "_trinity"
