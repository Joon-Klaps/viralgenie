report_comment: >
  This report has been generated by the <a href="https://github.com/Joon-Klaps/viralgenie" target="_blank">Joon-Klaps/viralgenie</a>
  analysis pipeline. For information about how to interpret these results, please see the
  <a href="https://github.com/Joon-Klaps/viralgenie" target="_blank">documentation</a>.

export_plots: true

max_table_rows: 100000

report_section_order:
  samples_low_reads:
    order: 997
  samples_without_contigs:
    order: 998
  samples_without_blast_hits:
    order: 999
  failed_contig_quality:
    before: summary_contigs
  failed_mapped:
    before: summary_contigs
  contig_overview:
    before: samtools_stats
  "viralgenie-methods-description":
    order: -1000
  software_versions:
    order: -1001
  "Joon-Klaps-viralgenie-summary":
    order: -1002

use_filename_as_sample_name:
  - fastp

run_modules:
  - custom_content
  - fastqc
  - fastp
  - trimmomatic
  - bbduk
  - umitools
  - bowtie2
  - kaiju
  - mosdepth
  - kraken
  - bracken
  - quast
  - samtools
  - bcftools
  - picard

module_order:
  - "fastqc":
      name: "SAMPLE: FastQC (Raw)"
      path_filters:
        - "*_raw*fastqc.zip"
  - "fastqc":
      name: "SAMPLE: FastQC (Post-trimming)"
      path_filters:
        - "*_trim*fastqc.zip"
  - "fastqc":
      name: "SAMPLE: FastQC (post-Host-removal)"
      path_filters:
        - "*_trim*fastqc.zip"
  - "fastp":
      name: "SAMPLE: fastp"
  - "trimmomatic":
      name: "SAMPLE: trimmomatic"
  - "bbduk":
      name: "SAMPLE: bbduk"
  - "kraken":
      name: "SAMPLE: Kraken2 (Host-removal)"
      path_filters:
        - "*_kraken2_host.kraken2.report.txt"
  - "kraken":
      name: "SAMPLE: Kraken2 (Diversity)"
      path_filters:
        - "*kraken2.kraken2.report.txt"
  - "bracken":
      name: "SAMPLE: Bracken (Diversity)"
      path_filters:
        - "*bracken.kraken2.report.txt"
  - "kaiju":
      name: "SAMPLE: Kaiju (Diversity)"
  - "quast":
      name: "SAMPLE: Quast (Spades)"
      anchor: "quast_spades"
      path_filters:
        - "*_spades.tsv"
  - "quast":
      name: "SAMPLE: Quast (Megahit)"
      anchor: "quast_megahit"
      path_filters:
        - "*_megahit.tsv"
  - "quast":
      name: "SAMPLE: Quast (Trinity)"
      anchor: "quast_trinity"
      path_filters:
        - "*_trinity.tsv"
  - "samtools":
      name: "CLUSTER: Samtools Stats"
  - "bcftools":
      name: "CLUSTER: Bcftools"
  - "picard":
      name: "CLUSTER: Picard"
  - "umitools":
      name: "CLUSTER: UMI-tools"
  - "mosdepth":
      name: "CLUSTER: mosdepth"
  - "custom_content"

# Summary table names
table_columns_name:
  "SAMPLE: FastQC (raw)":
    total_sequences: "Nr. Input Reads"
    avg_sequence_length: "Length Input Reads"
    percent_gc: "% GC Input Reads"
    percent_duplicates: "% Dups Input Reads"
    percent_fails: "% Failed Input Reads"
  "SAMPLE: FastQC (post-Trimming)":
    total_sequences: "Nr. reads post Trimming"
    avg_sequence_length: "Length reads post Trimming"
    percent_gc: "% GC reads post Trimming"
    percent_duplicates: "% Dups reads post Trimming"
    percent_fails: "% Failed reads post Trimming"
  "SAMPLE: FastQC (post-Host-removal)":
    total_sequences: "Nr. Processed Reads"
    avg_sequence_length: "Length Processed Reads"
    percent_gc: "% GC Processed Reads"
    percent_duplicates: "% Dups Processed Reads"
    percent_fails: "% Failed Processed Reads"
  "SAMPLE: Quast (Spades)":
    N50: "N50 (Spades)"
    L50: "L50 (Spades)"
    Largest contig: "Largest contig (Spades)"
    Total length: "Total length (Spades)"
  "SAMPLE: Quast (Megahit)":
    N50: "N50 (Megahit)"
    L50: "L50 (Megahit)"
    Largest contig: "Largest contig (Megahit)"
    Total length: "Total length (Megahit)"
  "SAMPLE: Quast (Trinity)":
    N50: "N50 (Trinity)"
    L50: "L50 (Trinity)"
    Largest contig: "Largest contig (Trinity)"
    Total length: "Total length (Trinity)"

# Summary table visible columns
table_columns_visible:
  "SAMPLE: FastQC (pre-Trimming)":
    total_sequences: True
    avg_sequence_length: True
    percent_gc: False
    percent_duplicates: False
    percent_fails: False
  "SAMPLE: FastQC (post-Trimming)":
    total_sequences: True
    avg_sequence_length: True
    percent_gc: True
    percent_duplicates: True
    percent_fails: True
  "SAMPLE: FastQC (post-Host-removal)":
    total_sequences: True
    avg_sequence_length: True
    percent_gc: True
    percent_duplicates: True
    percent_fails: True
  "SAMPLE: Kraken2 (Host-removal)": True
  "CLUSTER: Samtools Stats": False
  "CLUSTER: Bcftools: Stats": False
  "CLUSTER: Picard: Mark Duplicates": False
  "CLUSTER: UMI-tools": False
  "CLUSTER: mosdepth": False
  "SAMPLE: BBduk":
    Total Removed bases percent: False
    Total Removed reads percent: True
    Total Removed reads: True
  "SAMPLE: Quast (Spades)":
    N50: True
    L50: False
    Largest contig: True
    Total length: False
  "SAMPLE: Quast (Megahit)":
    N50: True
    L50: False
    Largest contig: True
    Total length: False
  "SAMPLE: Quast (Trinity)":
    N50: True
    L50: False
    Largest contig: True
    Total length: False

# TODO
# TRIED Give them all negative numbers so all columns from sample metadata are displayed first
# table_columns_placement:
#   "SAMPLE: FastQC (pre-Trimming)":
#     total_sequences: 500
#     avg_sequence_length: 501
#     percent_gc: 502
#     percent_duplicates: 503
#     percent_fails: 504
#   "SAMPLE: FastQC (post-Trimming)":
#     total_sequences: 505
#     avg_sequence_length: 506
#     percent_gc: 507
#     percent_duplicates: 508
#     percent_fails: 508
#   "SAMPLE: FastQC (post-Host-removal)":
#     total_sequences: 509
#     avg_sequence_length: 509
#     percent_gc: 509
#     percent_duplicates: 509
#     percent_fails: 509
#   "SAMPLE: BBDuk":
#     Total Removed bases percent: 510
#     Total Removed reads percent: 510
#     Total Removed reads: 510
#   "SAMPLE: Quast (Spades)":
#     N50: 511
#     L50: 512
#     Largest contig: 513
#     Total length: 514
#   "SAMPLE: Quast (Megahit)":
#     N50: 515
#     L50: 516
#     Largest contig: 517
#     Total length: 518
#   "SAMPLE: Quast (Trinity)":
#     N50: 519
#     L50: 520
#     Largest contig: 521
#     Total length: 522
#   "Custom content: clusters_summary":
#     "# Clusters": 523
#     "Average cluster size": 523
#     "Number of singletons": 523

section_comments:
  general_stats: "By default, all read count columns are displayed as millions (M) of reads."

sp:
  fastp:
    fn: "*.fastp.json"
  quast:
    fn: "*.tsv"
    contains: "contigs"
  kraken:
    fn: "*kraken2.report.txt"

extra_fn_clean_exts:
  - "_raw_1"
  - "_raw_2"
  - "_trim_1"
  - "_trim_2"
  - "_1"
  - "_2"
  - "_host"
  - "kraken2_host"
  - "_kraken2"
  - "_bracken2"
  - "_spades"
  - "_megahit"
  - "_trinity"
  - ".filtered"
